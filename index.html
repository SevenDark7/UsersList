<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <link rel="stylesheet" href="style.css">
    <title>Project2</title>
  </head>
  <body>

    <article class="formContine">
      <form class="inputForm" action="#">
        <div class="name">
          <label for="nameLabel">نام و نام خانوادگی</label>
          <input type="text" id="userName" placeholder="مثال: مهدی عابدی"> 
        </div>

        <div class="age">
          <label for="ageLabel">سن</label>
          <input type="number" id="userAge" placeholder="مثال: 20">
        </div>
        
        <div class="city">
          <label for="cityLabel">شهر</label>
          <input type="text" id="userCity" placeholder="مثال: اصفهان">
        </div>
        
        <div class="btn">
          <button type="reset" id="reset">انصراف</button>
          <button type="button" id="register">ثبت</button>
          <button type="button" id="change">ویرایش</button>
        </div>
      </form>
    </article>

    <table class="user">
      <caption>Users List</caption>
      <thead>
        <tr>
          <th>حذف</th>
          <th>ویرایش</th>
          <th>شهر</th>
          <th>سن</th>
          <th>نام و نام خانوادگی</th>
        </tr>
      </thead>
      <tbody id="users">
        <tr>
          <td><button type="button" class="del">حذف</button></td>
          <td><button type="button" class="edit">ویرایش</button></td>
          <td>اصفهان</td>
          <td>20</td>
          <td>مهدی عابدی</td>
        </tr>
        <tr>
          <td><button type="button" class="del">حذف</button></td>
          <td><button type="button" class="edit">ویرایش</button></td>
          <td>یاسوج</td>
          <td>18</td>
          <td>حسین مرادی</td>
        </tr>
        <tr>
          <td><button type="button" class="del">حذف</button></td>
          <td><button type="button" class="edit">ویرایش</button></td>
          <td>تهران</td>
          <td>27</td>
          <td>محمد رضا یاسینی</td>
        </tr>
        <tr>
          <td><button type="button" class="del">حذف</button></td>
          <td><button type="button" class="edit">ویرایش</button></td>
          <td>کرمان</td>
          <td>31</td>
          <td>حامد یعقوبی</td>
        </tr>
      </tbody>
    </table>


    <script src="jquery-3.6.0.min.js"></script>
    <script>
      $(document).ready(function() {
        $("#change").hide();
        $("#register").click(function() {
          var username = $("#userName").val();
          var userage = $("#userAge").val();
          var usercity = $("#userCity").val();
          if (username.trim().length < 1 || userage.trim().length < 1 || parseInt(userage) < 1 || usercity.trim().length < 1) {
            alert("لطفا مقادیر مربوطه را به صورت صحیح وارد کنید");
          }else {
            var userRow = $("<tr></tr>").prependTo("#users");
            var deleteData = $("<td></td>").appendTo(userRow);
            $("<button></button>").addClass("del").attr("type", "button").text("حذف").appendTo(deleteData);
            var editData = $("<td></td>").appendTo(userRow);
            $("<button></button>").addClass("edit").attr("type", "button").text("ویرایش").appendTo(editData);
            $("<td></td>").text(usercity).appendTo(userRow);
            $("<td></td>").text(userage).appendTo(userRow);
            $("<td></td>").text(username).appendTo(userRow);
            $("#reset").click();
          }
        });

        $(".del").click(function() {
          $(this).parent().parent().remove();
        });

        let editRow;
        let usercity;
        let userage;
        let username;

        $(".edit").click(function() {
          $("#register").hide();
          $("#change").show();
          editRow = $(this).parent().parent();
          usercity = editRow.children("td:nth-child(3)");
          userage = editRow.children("td:nth-child(4)");
          username = editRow.children("td:nth-child(5)");
          $("#reset").click();
          $("#userName").val(username.text());
          $("#userAge").val(userage.text());
          $("#userCity").val(usercity.text());
        });
        
        $("#change").click(function() {
            usercity.text($("#userCity").val());
            userage.text($("#userAge").val());
            username.text($("#userName").val());
            $("#reset").click();
            $("#change").hide();
            $("#register").show();
          });
      });
    </script>
   
  </body>
</html>
